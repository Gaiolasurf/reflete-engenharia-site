const translations = {
    pt: {
        home: "Início",
        about: "Sobre Nós",
        services: "Serviços",
        projects: "Projetos",
        contact: "Contato",
        heroTitle: "Excelência em Engenharia",
        heroSubtitle: "Soluções de alto padrão para projetos residenciais, comerciais e industriais",
        contactCta: "Entre em Contato",
        aboutTitle: "Sobre a REFLETE ENGENHARIA",
        aboutText1: "A <strong>REFLETE ENGENHARIA</strong> é uma empresa especializada em serviços de engenharia de alta qualidade, dedicada a oferecer soluções inovadoras e personalizadas para clientes residenciais, empresas, consultorias, prefeituras e construtoras.",
        aboutText2: "Nosso nome, <strong>REFLETE</strong>, representa nossa filosofia: refletir sobre cada detalhe, refletir a luz da inovação e refletir a excelência em cada projeto. Acreditamos que a engenharia vai além de cálculos e estruturas; ela reflete o pensamento estratégico, a visão de futuro e o compromisso com a qualidade.",
        aboutText3: "Com uma equipe altamente qualificada e experiente, oferecemos um portfólio completo de serviços, desde projetos estruturais até instalações complexas, sempre com foco na precisão, segurança e sustentabilidade.",
        servicesTitle: "Nossos Serviços",
        servicesSubtitle: "Oferecemos um portfólio completo de soluções em engenharia, com foco na excelência e inovação.",
        engProjectsTitle: "Engenharia e Projetos",
        engServices: "Serviços de Engenharia",
        techDrawing: "Desenho Técnico (Arquitetura e Engenharia)",
        waterManagement: "Projetos de Gestão de Águas",
        techExpertise: "Perícia Técnica (Segurança do Trabalho)",
        techReports: "Laudos Técnicos (LTCAT)",
        testsAnalysis: "Testes e Análises Técnicas",
        installMaintenanceTitle: "Instalações e Manutenção",
        electricHydraulic: "Instalações Elétricas, Hidráulicas, Sanitárias e de Gás",
        firePrevention: "Sistemas de Prevenção Contra Incêndio",
        acVentilation: "Sistemas de Ar Condicionado, Ventilação e Refrigeração",
        elevatorsEscalators: "Elevadores, Escadas e Esteiras Rolantes",
        lightingSignaling: "Iluminação e Sinalização em Vias Públicas, Portos e Aeroportos",
        worksStructuresTitle: "Obras e Estruturas",
        worksAdmin: "Administração de Obras",
        scaffolding: "Montagem e Desmontagem de Andaimes e Estruturas Temporárias",
        metalStructures: "Estruturas Metálicas",
        thermalAcoustic: "Tratamentos Térmicos, Acústicos ou de Vibração",
        projectsTitle: "Nossos Projetos",
        projectsSubtitle: "Conheça alguns dos projetos que refletem nossa excelência e compromisso com a qualidade.",
        project1Title: "Residência de Alto Padrão",
        project1Desc: "Projeto completo de engenharia estrutural e instalações para residência de luxo.",
        project2Title: "Edifício Comercial",
        project2Desc: "Administração de obra e instalações elétricas para edifício comercial.",
        project3Title: "Infraestrutura Pública",
        project3Desc: "Projetos de urbanização, iluminação, sinalização e manutenção para infraestrutura pública, incluindo licitações.",
        project4Title: "Indústria",
        project4Desc: "Instalação de máquinas e equipamentos industriais com sistemas de prevenção contra incêndio.",
        contactTitle: "Entre em Contato",
        contactSubtitle: "Estamos prontos para transformar suas ideias em realidade. Entre em contato conosco.",
        address: "Endereço",
        addressText: "Rua Gavião Peixoto<br>Icaraí - RJ",
        phone: "Telefone / WhatsApp",
        email: "E-mail",
        cnpj: "CNPJ",
        fullName: "Nome Completo",
        message: "Mensagem",
        sendMessage: "Enviar Mensagem",
        thanksMessage: "Obrigado por entrar em contato! Responderemos em breve.",
        testimonialsTitle: "O que nossos clientes dizem",
        testimonial1: "A REFLETE ENGENHARIA demonstrou uma **excelência notável na administração de nossa obra**, superando as expectativas em cada etapa. A gestão impecável resultou em uma **execução em tempo recorde**, sem comprometer a qualidade. É um privilégio trabalhar com uma equipe que une **organização, cronograma rigoroso e um canteiro de obras exemplarmente limpo**.",
        testimonial2: "O diferencial da REFLETE ENGENHARIA reside em seu **recurso técnico inigualável**, fundamentado em uma vasta experiência e profundo conhecimento em engenharia. A expertise de anos de profissão de sua equipe se reflete em **soluções inovadoras e seguras**, garantindo a **satisfação plena, profissionalismo e entrega** de resultados que realmente importam.",
        testimonial3: "Nossa parceria com a REFLETE ENGENHARIA em projetos públicos na cidade de Maricá - RJ foi um **sucesso absoluto**. A capacidade de entrega da equipe, aliada a **profissionais qualificados e uma estrutura robusta**, garantiu a conclusão dos empreendimentos com a mais alta qualidade e dentro dos prazos estabelecidos. Uma referência em engenharia para o setor público."
    },
    en: {
        home: "Home",
        about: "About Us",
        services: "Services",
        projects: "Projects",
        contact: "Contact",
        heroTitle: "Excellence in Engineering",
        heroSubtitle: "High-standard solutions for residential, commercial, and industrial projects",
        contactCta: "Get in Touch",
        aboutTitle: "About REFLETE ENGENHARIA",
        aboutText1: "<strong>REFLETE ENGENHARIA</strong> is a company specialized in high-quality engineering services, dedicated to offering innovative and personalized solutions for residential clients, businesses, consultancies, city halls, and construction companies.",
        aboutText2: "Our name, <strong>REFLETE</strong>, represents our philosophy: to reflect on every detail, to reflect the light of innovation, and to reflect excellence in every project. We believe that engineering goes beyond calculations and structures; it reflects strategic thinking, a future vision, and a commitment to quality.",
        aboutText3: "With a highly qualified and experienced team, we offer a complete portfolio of services, from structural projects to complex installations, always focusing on precision, safety, and sustainability.",
        servicesTitle: "Our Services",
        servicesSubtitle: "We offer a complete portfolio of engineering solutions, focusing on excellence and innovation.",
        engProjectsTitle: "Engineering and Projects",
        engServices: "Engineering Services",
        techDrawing: "Technical Drawing (Architecture and Engineering)",
        waterManagement: "Water Management Projects",
        techExpertise: "Technical Expertise (Occupational Safety)",
        techReports: "Technical Reports (LTCAT)",
        testsAnalysis: "Tests and Technical Analysis",
        installMaintenanceTitle: "Installations and Maintenance",
        electricHydraulic: "Electrical, Hydraulic, Sanitary, and Gas Installations",
        firePrevention: "Fire Prevention Systems",
        acVentilation: "Air Conditioning, Ventilation, and Refrigeration Systems",
        elevatorsEscalators: "Elevators, Escalators, and Moving Walkways",
        lightingSignaling: "Public Road, Port, and Airport Lighting and Signaling",
        worksStructuresTitle: "Works and Structures",
        worksAdmin: "Works Administration",
        scaffolding: "Assembly and Disassembly of Scaffolding and Temporary Structures",
        metalStructures: "Metallic Structures",
        thermalAcoustic: "Thermal, Acoustic, or Vibration Treatments",
        projectsTitle: "Our Projects",
        projectsSubtitle: "Discover some of the projects that reflect our excellence and commitment to quality.",
        project1Title: "High-Standard Residence",
        project1Desc: "Complete structural engineering and installation project for a luxury residence.",
        project2Title: "Commercial Building",
        project2Desc: "Works administration and electrical installations for a commercial building.",
        project3Title: "Public Infrastructure",
        project3Desc: "Urbanization, lighting, signaling, and maintenance projects for public infrastructure, including bidding processes.",
        project4Title: "Industry",
        project4Desc: "Installation of industrial machinery and equipment with fire prevention systems.",
        contactTitle: "Get in Touch",
        contactSubtitle: "We are ready to turn your ideas into reality. Contact us.",
        address: "Address",
        addressText: "Rua Gavião Peixoto<br>Icaraí - RJ",
        phone: "Phone / WhatsApp",
        email: "E-mail",
        cnpj: "CNPJ",
        fullName: "Full Name",
        message: "Message",
        sendMessage: "Send Message",
        thanksMessage: "Thank you for contacting us! We will respond shortly.",
        testimonialsTitle: "What Our Clients Say",
        testimonial1: "REFLETE ENGENHARIA demonstrated **remarkable excellence in the administration of our project**, exceeding expectations at every stage. Impeccable management resulted in **record-time execution**, without compromising quality. It is a privilege to work with a team that combines **organization, strict timelines, and an exemplarily clean construction site**.",
        testimonial2: "The differential of REFLETE ENGENHARIA lies in its **unparalleled technical resource**, founded on vast experience and deep knowledge in engineering. The expertise of years of profession of its team is reflected in **innovative and safe solutions**, ensuring **full satisfaction, professionalism, and delivery** of results that truly matter.",
        testimonial3: "Our partnership with REFLETE ENGENHARIA in public projects in the city of Maricá - RJ was an **absolute success**. The team's delivery capability, combined with **qualified professionals and a robust structure**, ensured the completion of projects with the highest quality and within established deadlines. A benchmark in engineering for the public sector."
    }
};

let currentLang = localStorage.getItem("lang") || "pt";

const setLanguage = (lang) => {
    currentLang = lang;
    localStorage.setItem("lang", lang);
    updateContent();
    updateActiveLangButton();
};

const updateContent = () => {
    const t = translations[currentLang];

    // Header
    document.querySelector("#menu a[href=\"#inicio\"]").innerHTML = t.home;
    document.querySelector("#menu a[href=\"#sobre\"]").innerHTML = t.about;
    document.querySelector("#menu a[href=\"#servicos\"]").innerHTML = t.services;
    document.querySelector("#menu a[href=\"#projetos\"]").innerHTML = t.projects;
    document.querySelector("#menu a[href=\"#contato\"]").innerHTML = t.contact;

    // Hero Section
    document.querySelector(".hero-content h2").innerHTML = t.heroTitle;
    document.querySelector(".hero-content p").innerHTML = t.heroSubtitle;
    document.querySelector(".cta-button").innerHTML = t.contactCta;

    // About Section
    document.querySelector("#sobre .section-title").innerHTML = t.aboutTitle;
    document.querySelector("#sobre .sobre-text p:nth-child(1)").innerHTML = t.aboutText1;
    document.querySelector("#sobre .sobre-text p:nth-child(2)").innerHTML = t.aboutText2;
    document.querySelector("#sobre .sobre-text p:nth-child(3)").innerHTML = t.aboutText3;

    // Services Section
    document.querySelector("#servicos .section-title").innerHTML = t.servicesTitle;
    document.querySelector("#servicos .section-subtitle").innerHTML = t.servicesSubtitle;
    document.querySelector(".servico-categoria:nth-child(1) h3").innerHTML = t.engProjectsTitle;
    document.querySelector(".servico-categoria:nth-child(1) ul li:nth-child(1)").innerHTML = t.engServices;
    document.querySelector(".servico-categoria:nth-child(1) ul li:nth-child(2)").innerHTML = t.techDrawing;
    document.querySelector(".servico-categoria:nth-child(1) ul li:nth-child(3)").innerHTML = t.waterManagement;
    document.querySelector(".servico-categoria:nth-child(1) ul li:nth-child(4)").innerHTML = t.techExpertise;
    document.querySelector(".servico-categoria:nth-child(1) ul li:nth-child(5)").innerHTML = t.techReports;
    document.querySelector(".servico-categoria:nth-child(1) ul li:nth-child(6)").innerHTML = t.testsAnalysis;

    document.querySelector(".servico-categoria:nth-child(2) h3").innerHTML = t.installMaintenanceTitle;
    document.querySelector(".servico-categoria:nth-child(2) ul li:nth-child(1)").innerHTML = t.electricHydraulic;
    document.querySelector(".servico-categoria:nth-child(2) ul li:nth-child(2)").innerHTML = t.firePrevention;
    document.querySelector(".servico-categoria:nth-child(2) ul li:nth-child(3)").innerHTML = t.acVentilation;
    document.querySelector(".servico-categoria:nth-child(2) ul li:nth-child(4)").innerHTML = t.elevatorsEscalators;
    document.querySelector(".servico-categoria:nth-child(2) ul li:nth-child(5)").innerHTML = t.lightingSignaling;

    document.querySelector(".servico-categoria:nth-child(3) h3").innerHTML = t.worksStructuresTitle;
    document.querySelector(".servico-categoria:nth-child(3) ul li:nth-child(1)").innerHTML = t.worksAdmin;
    document.querySelector(".servico-categoria:nth-child(3) ul li:nth-child(2)").innerHTML = t.scaffolding;
    document.querySelector(".servico-categoria:nth-child(3) ul li:nth-child(3)").innerHTML = t.metalStructures;
    document.querySelector(".servico-categoria:nth-child(3) ul li:nth-child(4)").innerHTML = t.thermalAcoustic;

    // Projects Section
    document.querySelector("#projetos .section-title").innerHTML = t.projectsTitle;
    document.querySelector("#projetos .section-subtitle").innerHTML = t.projectsSubtitle;
    document.querySelector(".projeto-card:nth-child(1) h3").innerHTML = t.project1Title;
    document.querySelector(".projeto-card:nth-child(1) p").innerHTML = t.project1Desc;
    document.querySelector(".projeto-card:nth-child(2) h3").innerHTML = t.project2Title;
    document.querySelector(".projeto-card:nth-child(2) p").innerHTML = t.project2Desc;
    document.querySelector(".projeto-card:nth-child(3) h3").innerHTML = t.project3Title;
    document.querySelector(".projeto-card:nth-child(3) p").innerHTML = t.project3Desc;
    document.querySelector(".projeto-card:nth-child(4) h3").innerHTML = t.project4Title;
    document.querySelector(".projeto-card:nth-child(4) p").innerHTML = t.project4Desc;

    // Contact Section
    document.querySelector("#contato .section-title").innerHTML = t.contactTitle;
    document.querySelector("#contato .section-subtitle").innerHTML = t.contactSubtitle;
    document.querySelector(".contato-info .info-item:nth-child(1) h3").innerHTML = t.address;
    document.querySelector(".contato-info .info-item:nth-child(1) p").innerHTML = t.addressText;
    document.querySelector(".contato-info .info-item:nth-child(2) h3").innerHTML = t.phone;
    document.querySelector(".contato-info .info-item:nth-child(3) h3").innerHTML = t.email;
    document.querySelector(".contato-info .info-item:nth-child(4) h3").innerHTML = t.cnpj;
    document.querySelector("label[for=\"nome\"]").innerHTML = t.fullName;
    document.querySelector("label[for=\"mensagem\"]").innerHTML = t.message;
    document.querySelector(".submit-button").innerHTML = t.sendMessage;

    // Testimonials Section
    const testimonialsSection = document.querySelector(".depoimentos-section");
    if (testimonialsSection) {
        testimonialsSection.querySelector(".section-title").innerHTML = t.testimonialsTitle;
        testimonialsSection.querySelector(".depoimento-card:nth-child(1) blockquote").innerHTML = t.testimonial1;
        testimonialsSection.querySelector(".depoimento-card:nth-child(2) blockquote").innerHTML = t.testimonial2;
        testimonialsSection.querySelector(".depoimento-card:nth-child(3) blockquote").innerHTML = t.testimonial3;
    }
};

const updateActiveLangButton = () => {
    document.querySelectorAll(".lang-btn").forEach(button => {
        button.classList.remove("active");
    });
    document.querySelector(`.lang-btn[data-lang="${currentLang}"]`).classList.add("active");
};

document.addEventListener("DOMContentLoaded", () => {
    // Menu Toggle para Mobile
    const menuToggle = document.getElementById("menu-toggle");
    const menu = document.getElementById("menu");
    const menuLinks = document.querySelectorAll("#menu a");

    menuToggle.addEventListener("click", () => {
        menu.classList.toggle("active");
        menuToggle.classList.toggle("active");
    });

    // Fechar menu ao clicar em um link
    menuLinks.forEach(link => {
        link.addEventListener("click", () => {
            menu.classList.remove("active");
            menuToggle.classList.remove("active");
        });
    });

    // Header Scroll Effect
    const header = document.getElementById("header");

    window.addEventListener("scroll", () => {
        if (window.pageYOffset > 50) {
            header.classList.add("scrolled");
        } else {
            header.classList.remove("scrolled");
        }
    });

    // Active Link on Scroll
    const sections = document.querySelectorAll("section[id]");

    function highlightNavLink() {
        const scrollY = window.pageYOffset;
        
        sections.forEach(section => {
            const sectionHeight = section.offsetHeight;
            const sectionTop = section.offsetTop - 100;
            const sectionId = section.getAttribute("id");
            const navLink = document.querySelector(`#menu a[href="#${sectionId}"]`);
            
            if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight) {
                navLink?.classList.add("active");
            } else {
                navLink?.classList.remove("active");
            }
        });
    }

    window.addEventListener("scroll", highlightNavLink);

    // Smooth Scroll for Navigation Links
    document.querySelectorAll("a[href^=\"#\"]").forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            const target = document.querySelector(this.getAttribute("href"));
            
            if (target) {
                const headerHeight = header.offsetHeight;
                const targetPosition = target.offsetTop - headerHeight;
                
                window.scrollTo({
                    top: targetPosition,
                    behavior: "smooth"
                });
            }
        });
    });

    // Dark Mode Toggle
    const darkModeToggle = document.getElementById("dark-mode-toggle");

    if (darkModeToggle) {
        darkModeToggle.addEventListener("click", () => {
            document.body.classList.toggle("dark-mode");
            // Salvar preferência do usuário
            if (document.body.classList.contains("dark-mode")) {
                localStorage.setItem("theme", "dark");
            } else {
                localStorage.setItem("theme", "light");
            }
        });

        // Carregar preferência do usuário ao carregar a página
        if (localStorage.getItem("theme") === "dark") {
            document.body.classList.add("dark-mode");
        }
    }

    // Language Selector
    document.querySelectorAll(".lang-btn").forEach(button => {
        button.addEventListener("click", () => {
            setLanguage(button.dataset.lang);
        });
    });

    // Initial language load
    setLanguage(currentLang);

    // Form Submission Handler
    const contactForm = document.getElementById("contact-form");

    if (contactForm) {
        contactForm.addEventListener("submit", (e) => {
            e.preventDefault();
            
            // Coletar dados do formulário
            const formData = {
                nome: document.getElementById("nome").value,
                email: document.getElementById("email").value,
                telefone: document.getElementById("telefone").value,
                mensagem: document.getElementById("mensagem").value
            };
            
            alert(translations[currentLang].thanksMessage);
            contactForm.reset();
        });
    }

    // Intersection Observer for Animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: "0px 0px -50px 0px"
    };

    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.animation = "fadeInUp 0.8s ease forwards";
                observer.unobserve(entry.target);
            }
        });
    }, observerOptions);

    // Observar elementos para animação
    document.querySelectorAll(".servico-categoria, .projeto-card, .info-item").forEach(el => {
        el.style.opacity = "0";
        observer.observe(el);
    });

    // Parallax Effect for Hero Section (simplified for video background)
    window.addEventListener("scroll", () => {
        const heroVideoPlaceholder = document.querySelector(".hero-video-placeholder");
        const scrolled = window.pageYOffset;
        const parallaxSpeed = 0.3; // Ajuste a velocidade do parallax
        
        if (heroVideoPlaceholder) {
            heroVideoPlaceholder.style.transform = `translateY(${scrolled * parallaxSpeed}px)`;
        }
    });

    // Preload optimization
    window.addEventListener("load", () => {
        document.body.classList.add("loaded");
    });

    // Carrossel de Projetos
    const projetosCarousel = document.querySelector(".projetos-carousel");
    const carouselButtons = document.querySelectorAll(".carousel-button");
    const carouselDotsContainer = document.querySelector(".carousel-dots");

    if (projetosCarousel) {
        let currentIndex = 0;
        let itemsPerView = 3; // Default for desktop

        const updateItemsPerView = () => {
            if (window.innerWidth <= 768) {
                itemsPerView = 1;
            } else if (window.innerWidth <= 1024) {
                itemsPerView = 2;
            } else {
                itemsPerView = 3;
            }
        };

        const updateCarousel = () => {
            updateItemsPerView();
            const itemWidth = projetosCarousel.children[0].offsetWidth;
            projetosCarousel.style.transform = `translateX(${-currentIndex * itemWidth}px)`;
            updateDots();
        };

        const createDots = () => {
            carouselDotsContainer.innerHTML = "";
            const totalItems = projetosCarousel.children.length;
            const totalDots = Math.ceil(totalItems / itemsPerView);
            for (let i = 0; i < totalDots; i++) {
                const dot = document.createElement("span");
                dot.classList.add("dot");
                if (i === 0) dot.classList.add("active");
                dot.addEventListener("click", () => {
                    currentIndex = i * itemsPerView;
                    updateCarousel();
                });
                carouselDotsContainer.appendChild(dot);
            }
        };

        const updateDots = () => {
            const dots = document.querySelectorAll(".carousel-dots .dot");
            dots.forEach((dot, index) => {
                if (index === Math.floor(currentIndex / itemsPerView)) {
                    dot.classList.add("active");
                } else {
                    dot.classList.remove("active");
                }
            });
        };

        carouselButtons.forEach(button => {
            button.addEventListener("click", () => {
                const totalItems = projetosCarousel.children.length;
                const totalDots = Math.ceil(totalItems / itemsPerView);

                if (button.classList.contains("prev")) {
                    currentIndex = Math.max(0, currentIndex - itemsPerView);
                } else {
                    currentIndex = Math.min(totalItems - itemsPerView, currentIndex + itemsPerView);
                }
                updateCarousel();
            });
        });

        window.addEventListener("resize", () => {
            updateItemsPerView();
            createDots(); // Recreate dots on resize to adjust for itemsPerView
            updateCarousel();
        });

        updateItemsPerView();
        createDots();
        updateCarousel();
    }
});



